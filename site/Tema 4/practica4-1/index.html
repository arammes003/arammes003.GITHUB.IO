
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://mydomain.org/mysite/Tema%204/practica4-1/">
      
      
        <link rel="prev" href="../../Tema%203/practica3-3/">
      
      
        <link rel="next" href="../../Tema%205/practica5-1/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.39">
    
    
      
        <title>Práctica 4.1.- Configuración de un servidor DNS - Alfonso Ramírez Mestanza - DAW</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8c3ca2c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#practica-41-configuracion-de-un-servidor-dns" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Alfonso Ramírez Mestanza - DAW" class="md-header__button md-logo" aria-label="Alfonso Ramírez Mestanza - DAW" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Alfonso Ramírez Mestanza - DAW
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Práctica 4.1.- Configuración de un servidor DNS
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Alfonso Ramírez Mestanza - DAW" class="md-nav__button md-logo" aria-label="Alfonso Ramírez Mestanza - DAW" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Alfonso Ramírez Mestanza - DAW
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inicio
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tema 2
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Tema 2
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%202/practica-amplicacion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica de Amplicación.- Configuración de un servidor Nginx con Hosts Virtuales y directorios de usuario
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%202/practica2-1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica 2.1 - Instalación y configuración de un servidor web Nginx
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%202/practica2-2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 2.2 - Autenticación en Nginx
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%202/practica2-3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 2.3.- Proxy inverso con Nginx
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%202/practica2-4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 2.4.- Balanceo de carga con proxy inverso en Nginx
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%202/practica2-5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica2.5.- Proxy Inverso y Balanceo de carga con SSL en NGINX
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tema 3
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Tema 3
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%203/practica3-1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 3.1.- Instalación de Tomcat
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%203/practica3-2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 3.2: Despliegue de aplicaciones con Node Express
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%203/practica3-3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 3.3.- Despliegue de una aplicación Flask
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tema 4
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Tema 4
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Práctica 4.1.- Configuración de un servidor DNS
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Práctica 4.1.- Configuración de un servidor DNS
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-instalacion-de-servidor-dns" class="md-nav__link">
    <span class="md-ellipsis">
      1.- Instalación de servidor DNS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-configuracion-del-servidor" class="md-nav__link">
    <span class="md-ellipsis">
      2.- Configuración del servidor
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#21-configuracion-namedconfoptions" class="md-nav__link">
    <span class="md-ellipsis">
      2.1.- Configuración named.conf.options
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#22-configuracion-namedconflocal" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.- Configuración named.conf.local
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#23-creacion-del-archivo-de-zona" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.- Creación del archivo de zona
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#24-creacion-del-archivo-de-zona-para-la-resolucion-inversa" class="md-nav__link">
    <span class="md-ellipsis">
      2.4.- Creación del archivo de zona para la resolución inversa
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#25-comprobacion-de-las-configuraciones" class="md-nav__link">
    <span class="md-ellipsis">
      2.5.- Comprobación de las configuraciones
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#26-comprobaciones-de-las-resoluciones-y-de-las-consultas" class="md-nav__link">
    <span class="md-ellipsis">
      2.6.- Comprobaciones de las resoluciones y de las consultas.
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tema 5
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Tema 5
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%205/practica5-1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica 5.1.- Ejercicios Git y Github I
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%205/practica5-2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Practica 5.1.- Ejercicios Git y Github II
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tema 6
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Tema 6
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%206/practica6-1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 6.1.- Dockerización del despliegue de una aplicación Node.js
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%206/practica6-2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 6.2 - Despliegue de una aplicación PHP con Nginx y MySQL usando Docker y docker-compose
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Tema%206/practica6-3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Práctica 6.3 - Despliegue de servidores web con usuarios autenticados mediante LDAP usando Docker y docker-compose
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-instalacion-de-servidor-dns" class="md-nav__link">
    <span class="md-ellipsis">
      1.- Instalación de servidor DNS
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-configuracion-del-servidor" class="md-nav__link">
    <span class="md-ellipsis">
      2.- Configuración del servidor
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#21-configuracion-namedconfoptions" class="md-nav__link">
    <span class="md-ellipsis">
      2.1.- Configuración named.conf.options
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#22-configuracion-namedconflocal" class="md-nav__link">
    <span class="md-ellipsis">
      2.2.- Configuración named.conf.local
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#23-creacion-del-archivo-de-zona" class="md-nav__link">
    <span class="md-ellipsis">
      2.3.- Creación del archivo de zona
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#24-creacion-del-archivo-de-zona-para-la-resolucion-inversa" class="md-nav__link">
    <span class="md-ellipsis">
      2.4.- Creación del archivo de zona para la resolución inversa
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#25-comprobacion-de-las-configuraciones" class="md-nav__link">
    <span class="md-ellipsis">
      2.5.- Comprobación de las configuraciones
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#26-comprobaciones-de-las-resoluciones-y-de-las-consultas" class="md-nav__link">
    <span class="md-ellipsis">
      2.6.- Comprobaciones de las resoluciones y de las consultas.
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="practica-41-configuracion-de-un-servidor-dns">Práctica 4.1.- Configuración de un servidor DNS</h1>
<p>Antes de empezar, deberemos asegurarnos de que no hay ninguna entrada en nuestro archivo <code>/etc/hosts</code> para asegurarnos que la resolución de nombres va a nuestro servidor <strong>DNS</strong>.
<img alt="alt text" src="../assets/practica4-1/image.png" />
<img alt="alt text" src="../assets/practica4-1/image-22.png" />
Podemos comentarlas como yo he hecho, o eliminarlas.</p>
<p>También, iniciaremos sesión por SSH desde nuestra máquina física a nuestro servidor Debian:
<img alt="alt text" src="../assets/practica4-1/image-1.png" /></p>
<h2 id="1-instalacion-de-servidor-dns">1.- Instalación de servidor DNS</h2>
<p>Para instalar nuestro servidor DNS, usaremos los repositorios oficiales a través del comando <code>sudo apt-get install bind9 bind9utils bind9-doc</code>.
<img alt="alt text" src="../assets/practica4-1/image-2.png" /></p>
<h2 id="2-configuracion-del-servidor">2.- Configuración del servidor</h2>
<p>Como solo usaremos <strong>IPv4</strong>, modificaremos el archivo general de configuración que se encuentra en <code>/etc/default/named</code> con <code>sudo nano</code>.
<img alt="alt text" src="../assets/practica4-1/image-3.png" /></p>
<p>Cuando se abra lo unico que deberemos modificar para indicarle que solo use <strong>IPv4</strong> es la línea <code>OPTIONS="-u bind"</code> dónde solo tendremos que poner lo siguiente:
<img alt="alt text" src="../assets/practica4-1/image-4.png" /></p>
<p>Guardamos los caambios y consultamos la confiuguración principal <code>named.conf</code> que se encuentra en el directorio <code>/etc/bind</code>, deberemos ver lo siguiente:
<img alt="alt text" src="../assets/practica4-1/image-5.png" />
Los 3 includes que aparecen hacen referencia a los archivos donde deberemos realizar nuestra configuración.</p>
<h2 id="21-configuracion-namedconfoptions">2.1.- Configuración <em>named.conf.options</em></h2>
<p>Antes de empezar con la configuración, se recomienda hacer una copia de seguridad del archivo de configuración antes de realizar cambios sobre el archivo, para ello usamos el comand <code>sudo cp /etc/bind/named.conf.options /etc/bind/named.conf.options.backup</code>.
<img alt="alt text" src="../assets/practica4-1/image-6.png" /></p>
<p>Ahora editamos el archivo <code>named.conf.options</code>, con <code>sudo nano /etc/bind/named.conf.options</code>, nos deberá aparecer esta ventana:
<img alt="alt text" src="../assets/practica4-1/image-7.png" /></p>
<ul>
<li>Por motivos de seguridad, incluiremos una lista de acceso para que solo puedan acceder los hosts que nosotros queramos, en mi caso, será <code>192.168.X.0/24</code>, para que tenga acceso cualquier host de la red. Para ello, antes del bloque <code>options{...}</code>, añadimos algo así:</li>
</ul>
<pre><code>acl permitidos {
        TuDireccionIp/MascaraDeRed
}

</code></pre>
<p><strong>X</strong> es el terer byte de tu ip, en mi caso será <strong>116</strong>.
<img alt="alt text" src="../assets/practica4-1/image-8.png" /></p>
<p>Si nos fijamos en la primera línea de configuración de opciones, nos aparece por defecto el directorio donde se guardarán las zonas, que es <code>/var/cache/bind</code>, es decir, viene pre configurado para ser un <strong>DNS Caché</strong>.</p>
<ul>
<li>El siguiente paso será anular las consultas de <strong>IPv6</strong>, puesto que no vamos a utilizarlo, para ello bajamos a la última línea de configuración de opciones y comentamos con una doble barra <code>//</code>.</li>
<li>Tambien permitiremos solo las consultas recursivas.</li>
<li>No permitiremos tranferencias.</li>
<li>Configuraremos el servidor para que escuche consultas DNS por el puerto 53. Quedaría así la nueva configuración.</li>
</ul>
<pre><code>        allow-recursion {confiables;};
        allow-transfe{none;};
        listen-on port 53{192.168.116.118;};
        recursion yes;


        //========================================================================
        // If BIND logs error messages about the root key being expired,
        // you will need to update your keys.  See https://www.isc.org/bind-keys
        //========================================================================
        dnssec-validation auto;

        //listen-on-v6 { any; };
</code></pre>
<p><img alt="alt text" src="../assets/practica4-1/image-9.png" /></p>
<p>Guardamos cambios y salimos del archivo.</p>
<ul>
<li>
<p>Lo siguiente es comprobar si la configuración es correcta con <code>sudo named-checkconf</code>:
  <img alt="alt text" src="../assets/practica4-1/image-10.png" />
  Si no aparece nada es que todo esta correctamente configurado, si no, nos aparecería un mensaje de error.</p>
</li>
<li>
<p>Reiniciamos el servidor con <code>sudo systemctl restart named</code> y comprobamos el estado con <code>sudo systemctl status named</code>;
  <img alt="alt text" src="../assets/practica4-1/image-11.png" />
  Si todo esta correcto nos aparecera un mensaje indicando que esta <strong>activo</strong>.</p>
</li>
</ul>
<h2 id="22-configuracion-namedconflocal">2.2.- Configuración <em>named.conf.local</em></h2>
<p>Para ello, lo que haremos es declarar una zona llamada <code>deaw.es</code>. Dentro configuraremos los aspectos de nuestras zonas, que por ahora será lo siguiente:</p>
<pre><code>zone &quot;deaw.es&quot; {
        type master;
        file &quot;/etc/bind/db.deaw.es&quot;;
}
</code></pre>
<p>Aquí indicamos que el servidor DNS de nuestra zona es maestro y la ubicación de la zona que la crearemos más adelante. El archivo quedaría de la siguiente forma:
<img alt="alt text" src="../assets/practica4-1/image-12.png" /></p>
<h2 id="23-creacion-del-archivo-de-zona">2.3.- Creación del archivo de zona</h2>
<p>Para ello accedemos a <code>/etc/bind/db.deaw.es</code> y ponemos el siguiente contenido:</p>
<pre><code>$TTL 604800
@       IN      SOA     debian.deaw.es. admin.deaw.es. (
                2022112001 ;Serial
                3600       ;Refresh
                1800       ;Retry
                604800     ;Expire
                86400      ;Minimum TTL
        )

        IN NS debian.deaw.es.

debian IN A 192.168.X.X //IP DE TU SERVIDOR
</code></pre>
<p>Quedaría de la siguiente manera:
<img alt="alt text" src="../assets/practica4-1/image-13.png" /></p>
<h2 id="24-creacion-del-archivo-de-zona-para-la-resolucion-inversa">2.4.- Creación del archivo de zona para la resolución inversa</h2>
<p>Para este paso accedemos de nuevo a <code>named.conf.local</code> donde crearemos la siguiente configuración:</p>
<pre><code>zone &quot;X.168.192.in-addr.arpa&quot; {
        type master;
        file &quot;/etc/bind/db.X.168.192&quot;;
};
</code></pre>
<p>En la <strong>X</strong> pondremos nuestro 3º byte de la dirección IP, por ejemplo: <code>192.168.116.168</code>, colocamos <code>116</code>.
<img alt="alt text" src="../assets/practica4-1/image-14.png" /></p>
<p>Y creamos otro archivo de configuración en <code>/etc/bind/db.X.168.192</code> donde <code>X</code>, es el 3º byte de tu IP.</p>
<pre><code>$TTL 604800
@       IN      SOA     debian.deaw.es. admin.deaw.es. (
                ; Cualquier valor numérico es OK para el serial
                ; pero recomendado: [AñoMesDiaVersión]
                2025011601 ;Serial
                3600       ;Refresh
                1800       ;Retry
                604800     ;Expire
                86400      ;Minimum TTL
        )

@ IN NS debian.deaw.es.

debian IN A 192.168.116.168
</code></pre>
<p><img alt="alt text" src="../assets/practica4-1/image-15.png" /></p>
<p>Comprobamos si la configuración es correcta con <code>sudo named-checkconf</code>:
<img alt="alt text" src="../assets/practica4-1/image-16.png" /></p>
<h2 id="25-comprobacion-de-las-configuraciones">2.5.- Comprobación de las configuraciones</h2>
<p>Comprobamos la configuración de la resolución directa con <code>sudo named-checkzone db.deaw.es db.X.168.192</code>:
<img alt="alt text" src="../assets/practica4-1/image-17.png" /></p>
<p>Y para comprobar la configuración de la zona de resolución inversa <code>sudo named-checkzone db.X.168.192 db.deaw.es</code>
<img alt="alt text" src="../assets/practica4-1/image-18.png" /></p>
<p>Si todo esta bien aparecerá un mensaje de <strong>OK</strong>. Reiniciamos el servicio y comprobamos el estado con:</p>
<pre><code>sudo systemctl restart named
sudo systemctl status named
</code></pre>
<p><img alt="alt text" src="../assets/practica4-1/image-19.png" /></p>
<h2 id="26-comprobaciones-de-las-resoluciones-y-de-las-consultas">2.6.- Comprobaciones de las resoluciones y de las consultas.</h2>
<p>Primero, deberemos configurar nuestro cliente modificando el archivo <code>/etc/resolv.conf</code> con la IP del servidor como servidor DNS. Quedaría así:
<img alt="alt text" src="../assets/practica4-1/image-24.png" /></p>
<p>Con el comando <code>dig debian.deaw.es</code> y <code>dig -x 192.168.116.168</code> podemos comprobar las resoluciones directas e inversas que hemos configurado anteriormente.
<img alt="alt text" src="../assets/practica4-1/image-25.png" /></p>
<p>También podemos comprobarlo con <code>nslookup debian.deaw.es</code> y <code>nslookup 192.168.X.X</code>, donde las <code>X</code>, son tu dirección IP del servidor:
<img alt="alt text" src="../assets/practica4-1/image-26.png" /></p>
<h1 id="3-cuestiones">3.- Cuestiones</h1>
<h2 id="31-que-pasara-si-un-cliente-de-una-red-diferente-a-la-tuya-intenta-hacer-uso-de-tu-dns-de-alguna-manera-le-funcionarapor-que-en-que-parte-de-la-configuracion-puede-verse">3.1.- ¿Qué pasará si un cliente de una red diferente a la tuya intenta hacer uso de tu DNS de alguna manera, le funcionará?¿Por qué, en qué parte de la configuración puede verse?</h2>
<p>No funcionará porque en la configuración se ha definido la directiva <code>listen-on port 53 {192.168.116.118;};</code>, esto quiere decir que el servidor solo escucha en esa dirección IP de la red local. Además, la directiva <code>allow-recursion {confiables;};</code> solo permite que los clientes que estan en ese grupo puedan hacer consultas recursivas.</p>
<h2 id="32-por-que-tenemos-que-permitir-las-consultas-recursivas-en-la-configuracion">3.2.- ¿Por qué tenemos que permitir las consultas recursivas en la configuración?</h2>
<p>Porque las consultas recursivas permiten que el servidor DNS resuelva nombres de dominio completos cuando se solicita un dominio que no está en esa misma máquina. Sin no fuese recursivo, el servidor solo respondería a consultas sobre los dominios que administra.</p>
<h2 id="33-el-servidor-dns-que-acabais-de-montar-es-autoritativopor-que">3.3.- El servidor DNS que acabáis de montar, ¿es autoritativo?¿Por qué?</h2>
<p>Sí, porque hemos definido zonas primarias de <code>type master;</code>.</p>
<h2 id="34-donde-podemos-encontrar-la-directiva-origin-y-para-que-sirve">3.4.- ¿Dónde podemos encontrar la directiva $ORIGIN y para qué sirve?</h2>
<p>La directiva <code>$ORIGIN</code> se encuentra en los archivos de zona de un servidor DNS y sirve para establecer un dominio base para los registros de la zona, evitando que sea necesario escribir el nombre de dominio completo en cada registro.</p>
<h2 id="35-una-zona-es-identico-a-un-dominio">3.5.- ¿Una zona es idéntico a un dominio?</h2>
<p>No. Un <code>dominio</code> es un nombre dentro del sistema DNS y una <code>zona</code> es una parte de un dominio gestionada por un servidor DNS específico.</p>
<h2 id="36-pueden-editarse-los-archivos-de-zona-de-un-servidor-esclavosecundario">3.6.- ¿Pueden editarse los archivos de zona de un servidor esclavo/secundario?</h2>
<p>No, ya que estos archivos se obtienen mediante transferencias de zona desde el servidor primario.</p>
<h2 id="37-por-que-podria-querer-tener-mas-de-un-servidor-esclavo-para-una-misma-zona">3.7.- ¿Por qué podría querer tener más de un servidor esclavo para una misma zona?</h2>
<p>Para mejorar la redundancia y la disponibilidad, así si falla algún servidor secundario, los demás seguiránn respondiendo las consultas.</p>
<h2 id="38-cuantos-servidores-raiz-existen">3.8.- ¿Cuántos servidores raíz existen?</h2>
<p>Hay 13 servidores raíz de la A a la M y cada uno esta respaldado por múltiples servidores.</p>
<h2 id="39-que-es-una-consulta-iterativa-de-referencia">3.9.- ¿Qué es una consulta iterativa de referencia?</h2>
<p>Es una consulta en la que el servidor DNS no puede resuelve la consulta por completo y este responde con una referencia al siguiente servidor que debe consultarse.</p>
<h2 id="310-en-una-resolucion-inversa-a-que-nombre-se-mapearia-la-direccion-ip-172163456">3.10.- En una resolución inversa, ¿a qué nombre se mapearía la dirección IP 172.16.34.56?</h2>
<p>56 IN PTR ejercicio10.com.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.525ec568.min.js"></script>
      
    
  </body>
</html>